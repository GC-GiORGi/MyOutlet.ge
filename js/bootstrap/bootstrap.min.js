ileCompanionAppType["LegacyCompanionApp"]="legacyCompanionApp",MobileCompanionAppType["CompanionApp"]="companionApp"}(MobileCompanionAppType||(MobileCompanionAppType={}))},1243:function(module,__webpack_exports__,__webpack_require__){"use strict";var CompanionAppLoginStatus;__webpack_require__.d(__webpack_exports__,"a",(function(){return CompanionAppLoginStatus})),function(CompanionAppLoginStatus){CompanionAppLoginStatus["Cancelled"]="cancelled",CompanionAppLoginStatus["Finished"]="finished"}(CompanionAppLoginStatus||(CompanionAppLoginStatus={}))},"2d05":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ApiFactory}));var _api_Api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("add3");class ApiFactory{constructor(_defaultApi=_api_Api__WEBPACK_IMPORTED_MODULE_0__["a"]){this._defaultApi=_defaultApi,this._map=new Map}registerApi(spaceId,ctor){this._map.set(spaceId,ctor)}unRegisterApi(spaceId){this._map.delete(spaceId)}createAppropriateApi(store,appConfig,logger,pcClientWrapper){const constructor=this._map.get(appConfig.spaceId);return constructor?new constructor(store,appConfig,logger,pcClientWrapper):new this._defaultApi(store,appConfig,logger,pcClientWrapper)}}},"2e22":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return LayoutType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return LayoutPlacements}));var LayoutType,_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("0f0f");(function(LayoutType){LayoutType["default"]="default",LayoutType["pcClient"]="pc-client",LayoutType["child"]="child"})(LayoutType||(LayoutType={}));const LayoutPlacements={[LayoutType.default]:[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["Placement"].main],[LayoutType.pcClient]:[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["Placement"].main,_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["Placement"].side],[LayoutType.child]:[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["Placement"].main]}},"35e9":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PlayStationInterface}));var _utils_AsyncDelay__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("3bde"),_AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("557e");class PlayStationInterface extends _AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__["a"]{constructor(logger){super(logger)}async closeOverlay(){window.document.body.className="closed",await Object(_utils_AsyncDelay__WEBPACK_IMPORTED_MODULE_0__["a"])(350),window.document.body.innerHTML="",await Object(_utils_AsyncDelay__WEBPACK_IMPORTED_MODULE_0__["a"])(16),window.location.href="uplayscheme:"}}},"40f3":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return scalingStrategiesConfig}));var _upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("0f0f"),_models_Display__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5462");const scalingStrategiesConfig={[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].Mobile]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].Android]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].IOS]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].PC]:{defaultFactor:1,breakpointRounding:.9,screenBreakpoints:[{screen:new _models_Display__WEBPACK_IMPORTED_MODULE_1__["a"](1280,720),factor:.8},{screen:new _models_Display__WEBPACK_IMPORTED_MODULE_1__["a"](1920,1080),factor:1},{screen:new _models_Display__WEBPACK_IMPORTED_MODULE_1__["a"](3840,2160),factor:2}]},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].Luna]:{defaultFactor:1,breakpointRounding:.9,screenBreakpoints:[{screen:new _models_Display__WEBPACK_IMPORTED_MODULE_1__["a"](1280,720),factor:.8},{screen:new _models_Display__WEBPACK_IMPORTED_MODULE_1__["a"](1920,1080),factor:1},{screen:new _models_Display__WEBPACK_IMPORTED_MODULE_1__["a"](3840,2160),factor:2}]},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].PS4]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].PS5]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].Scarlett]:{defaultFactor:.5},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].XONE]:{defaultFactor:.4},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].ScarlettUWP]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].Stadia]:{defaultFactor:1},[_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["PlatformType"].Web]:{defaultFactor:1}}},5462:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Display}));class Display{constructor(width,height,diagonal=24){this.width=width,this.height=height,this.diagonal=diagonal}static fromSize(width,height,diagonal=24){return new Display(width,height,diagonal)}static fromDpi(width,height,dpi){const diagonal=Math.sqrt(Math.pow(width,2)+Math.pow(height,2))/dpi;return new Display(width,height,diagonal)}get largerSide(){return Math.max(this.width,this.height)}get smallerSide(){return Math.max(this.width,this.height)}get isZero(){return 0!==this.width&&0!==this.height}get isPortrait(){return!this.isLandscape}get isLandscape(){return this.width>=this.height}get megapixels(){return this.width*this.height/1e6}isWiderThan(screen){return this.width>screen.width}isTallerThan(screen){return this.height>screen.height}get dpi(){return Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/this.diagonal}isEqual(screen,ignoreRotation=!1){return ignoreRotation?this.largerSide===screen.largerSide&&this.smallerSide===screen.smallerSide:this.width===screen.width&&this.height===screen.height}asLandscape(){return new Display(this.largerSide,this.smallerSide,this.diagonal)}asPortrait(){return new Display(this.smallerSide,this.largerSide,this.diagonal)}asRotated(){return this.isLandscape?this.asPortrait():this.asLandscape()}toString(){return"[w: ".concat(this.width,", h: ").concat(this.height,"]")}}},"557e":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractPlatformInterface}));class AbstractPlatformInterface{constructor(_logger){this._logger=_logger}requiresDeactivation(){return!0}}},"6fc5":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildDefaultPlacementMap}));var _upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("0f0f"),clone_deep__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9675"),clone_deep__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(clone_deep__WEBPACK_IMPORTED_MODULE_1__);function buildDefaultPlacementMap(defaultValue){let placementMap={};return Object.values(_upn_shell_sdk__WEBPACK_IMPORTED_MODULE_0__["Placement"]).forEach(placement=>placementMap[placement]=clone_deep__WEBPACK_IMPORTED_MODULE_1___default()(defaultValue)),placementMap}},"7afc":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return XboxNetworkStatusChangeListener}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("9ab4"),_upc_utility_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ca76"),_store_application_Application_intents__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("61d7"),_XboxInterface__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c604");class XboxNetworkStatusChangeListener{constructor(_store){this._store=_store,window.Windows&&window.Windows.Networking.Connectivity.NetworkInformation.addEventListener("networkstatuschanged",this.onNetworkStatusChange)}onNetworkStatusChange(){if(window.Windows){const connectionProfile=window.Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(connectionProfile){const connectivityLevel=connectionProfile.getNetworkConnectivityLevel();return connectivityLevel===_XboxInterface__WEBPACK_IMPORTED_MODULE_3__["a"].internetAccess?void this._store.dispatchIntent(new _store_application_Application_intents__WEBPACK_IMPORTED_MODULE_2__["e"](!0)):void this._store.dispatchIntent(new _store_application_Application_intents__WEBPACK_IMPORTED_MODULE_2__["e"](!1))}this._store.dispatchIntent(new _store_application_Application_intents__WEBPACK_IMPORTED_MODULE_2__["e"](!1))}else;}dispose(){window.Windows&&window.Windows.Networking.Connectivity.NetworkInformation.removeEventListener("networkstatuschanged",this.onNetworkStatusChange)}}Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([Object(_upc_utility_types__WEBPACK_IMPORTED_MODULE_1__["Bound"])()],XboxNetworkStatusChangeListener.prototype,"onNetworkStatusChange",null)},8358:function(module,__webpack_exports__,__webpack_require__){"use strict";var PSEnterButton;__webpack_require__.d(__webpack_exports__,"a",(function(){return PSEnterButton})),function(PSEnterButton){PSEnterButton["Cross"]="cross",PSEnterButton["Circle"]="circle"}(PSEnterButton||(PSEnterButton={}))},"84df":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return setupPolyfills})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addFormatJSLocaleDataPolyfill}));__webpack_require__("e01a"),__webpack_require__("b636"),__webpack_require__("2a1b"),__webpack_require__("80e0"),__webpack_require__("6b9e"),__webpack_require__("2351"),__webpack_require__("0481"),__webpack_require__("5db7"),__webpack_require__("13d5"),__webpack_require__("f4dd"),__webpack_require__("26e9"),__webpack_require__("4e82"),__webpack_require__("4069"),__webpack_require__("73d9"),__webpack_require__("c19f"),__webpack_require__("ace4"),__webpack_require__("4057"),__webpack_require__("b680"),__webpack_require__("cca6"),__webpack_require__("c1f9"),__webpack_require__("e6cf"),__webpack_require__("a79d"),__webpack_require__("7ed3"),__webpack_require__("4d63"),__webpack_require__("ac1f"),__webpack_require__("5377"),__webpack_require__("25f0"),__webpack_require__("8a79"),__webpack_require__("2532"),__webpack_require__("466d"),__webpack_require__("5319"),__webpack_require__("841c"),__webpack_require__("1276"),__webpack_require__("2ca0"),__webpack_require__("498a"),__webpack_require__("1e25"),__webpack_require__("eee7"),__webpack_require__("cfc3"),__webpack_require__("4a9b"),__webpack_require__("fd87"),__webpack_require__("8b09"),__webpack_require__("143c"),__webpack_require__("5cc6"),__webpack_require__("8a59"),__webpack_require__("84c3"),__webpack_require__("fb2c"),__webpack_require__("20bf"),__webpack_require__("ec97"),__webpack_require__("219c"),__webpack_require__("b39a"),__webpack_require__("eba5"),__webpack_require__("8883"),__webpack_require__("dad3"),__webpack_require__("8182"),__webpack_require__("1034"),__webpack_require__("8fe5"),__webpack_require__("c206"),__webpack_require__("477f"),__webpack_require__("97fb"),__webpack_require__("d2af"),__webpack_require__("9f9a"),__webpack_require__("ceef"),__webpack_require__("8a1a"),__webpack_require__("43b3"),__webpack_require__("ba74"),__webpack_require__("567a"),__webpack_require__("9c87"),__webpack_require__("094c"),__webpack_require__("a9cd"),__webpack_require__("e7dd"),__webpack_require__("54ec"),__webpack_require__("4e16"),__webpack_require__("f43e"),__webpack_require__("70e3"),__webpack_require__("bdd4"),__webpack_require__("2abc"),__webpack_require__("48be"),__webpack_require__("95e8"),__webpack_require__("78ed"),__webpack_require__("36a4"),__webpack_require__("c3bb"),__webpack_require__("b968"),__webpack_require__("58fc"),__webpack_require__("355d"),__webpack_require__("9f2f"),__webpack_require__("6b9f"),__webpack_require__("bf3c"),__webpack_require__("a5eb"),__webpack_require__("f20a"),__webpack_require__("0ebb"),__webpack_require__("9029"),__webpack_require__("fbec"),__webpack_require__("6380"),__webpack_require__("66c1"),__webpack_require__("bd98"),__webpack_require__("e6bd"),__webpack_require__("b10f"),__webpack_require__("6dd7"),__webpack_require__("0308"),__webpack_require__("aa01"),__webpack_require__("e3df"),__webpack_require__("015a"),__webpack_require__("85ca2"),__webpack_require__("74d4"),__webpack_require__("dee5"),__webpack_require__("b628"),__webpack_require__("d644"),__webpack_require__("658e"),__webpack_require__("0b52"),__webpack_require__("9661"),__webpack_require__("0a8d"),__webpack_require__("e495"),__webpack_require__("72d0"),__webpack_require__("f2be"),__webpack_require__("2705"),__webpack_require__("a9a1"),__webpack_require__("4a2e"),__webpack_require__("0466"),__webpack_require__("7cdf"),__webpack_require__("5333"),__webpack_require__("0e13"),__webpack_require__("ad9d"),__webpack_require__("6a90"),__webpack_require__("e176"),__webpack_require__("e95e"),__webpack_require__("71f8"),__webpack_require__("ef4d"),__webpack_require__("4c9e"),__webpack_require__("6789"),__webpack_require__("f124"),__webpack_require__("b294"),__webpack_require__("adbd"),__webpack_require__("ddb0"),__webpack_require__("130f"),__webpack_require__("9f96"),__webpack_require__("2b3d"),__webpack_require__("bf19"),__webpack_require__("9861"),__webpack_require__("6d93"),__webpack_require__("5abe");var _formatjs_intl_locale_should_polyfill__WEBPACK_IMPORTED_MODULE_140__=__webpack_require__("5769"),_formatjs_intl_pluralrules_should_polyfill__WEBPACK_IMPORTED_MODULE_141__=__webpack_require__("a98b"),_juggle_resize_observer__WEBPACK_IMPORTED_MODULE_142__=__webpack_require__("1d1f"),_localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__=__webpack_require__("4fb9");let polyfillingPluralRules=!1;function setupPolyfills(){"ResizeObserver"in window===!1&&(window.ResizeObserver=_juggle_resize_observer__WEBPACK_IMPORTED_MODULE_142__["a"]),addFormatJSPolyfill()}function addFormatJSPolyfill(){Object(_formatjs_intl_locale_should_polyfill__WEBPACK_IMPORTED_MODULE_140__["shouldPolyfill"])()&&Promise.all([__webpack_require__.e("chunk-030d57fa"),__webpack_require__.e("chunk-ef98147a")]).then(__webpack_require__.t.bind(null,"a37b",7)),Object(_formatjs_intl_pluralrules_should_polyfill__WEBPACK_IMPORTED_MODULE_141__["shouldPolyfill"])()&&(Promise.all([__webpack_require__.e("chunk-030d57fa"),__webpack_require__.e("chunk-6b79b243")]).then(__webpack_require__.t.bind(null,"6923",7)),polyfillingPluralRules=!0)}function addFormatJSLocaleDataPolyfill(language){if(polyfillingPluralRules)switch(language){case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Czech:__webpack_require__.e("chunk-2d0cf0e3").then(__webpack_require__.t.bind(null,"61a3",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].German:__webpack_require__.e("chunk-2d0c971c").then(__webpack_require__.t.bind(null,"58be",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].English:__webpack_require__.e("chunk-2d0c4e24").then(__webpack_require__.t.bind(null,"3d74",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Spanish:case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].LatinAmericanSpanish:__webpack_require__.e("chunk-2d22cc48").then(__webpack_require__.t.bind(null,"f547",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].French:__webpack_require__.e("chunk-74b6e71c").then(__webpack_require__.t.bind(null,"7ea87",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Italian:__webpack_require__.e("chunk-2d0bfed8").then(__webpack_require__.t.bind(null,"4039",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Japanese:__webpack_require__.e("chunk-2d0c971d").then(__webpack_require__.t.bind(null,"58bf",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Korean:__webpack_require__.e("chunk-2d0b9787").then(__webpack_require__.t.bind(null,"32a3",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Dutch:__webpack_require__.e("chunk-2d229067").then(__webpack_require__.t.bind(null,"dc4f",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Polish:__webpack_require__.e("chunk-2d21a794").then(__webpack_require__.t.bind(null,"bc52",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].BrazilianPortugese:__webpack_require__.e("chunk-2d228bfd").then(__webpack_require__.t.bind(null,"db09",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Russian:__webpack_require__.e("chunk-2d0a3cdb").then(__webpack_require__.t.bind(null,"0478",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Swedish:__webpack_require__.e("chunk-2d22dd17").then(__webpack_require__.t.bind(null,"f8b1",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].Turkish:__webpack_require__.e("chunk-2d2225d2").then(__webpack_require__.t.bind(null,"cdfa",7));break;case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].SimplifiedChinese:case _localization_model_LanguageCode__WEBPACK_IMPORTED_MODULE_143__["a"].TraditionalChinese:__webpack_require__.e("chunk-2d0cfe17").then(__webpack_require__.t.bind(null,"6634",7));break;default:__webpack_require__.e("chunk-2d0c4e24").then(__webpack_require__.t.bind(null,"3d74",7));break}}},a5c4:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MobileInterface}));var _upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("f350"),_AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("557e");class MobileInterface extends _AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__["a"]{constructor(logger,_featureHandlerService){super(logger),this._featureHandlerService=_featureHandlerService}async closeOverlay(){await this._featureHandlerService.handleFeature(_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["h"].LoginResult,{shouldSendNotification:!0})}}},ab39:function(module,__webpack_exports__,__webpack_require__){"use strict";var NavigationDirection;__webpack_require__.d(__webpack_exports__,"a",(function(){return NavigationDirection})),function(NavigationDirection){NavigationDirection["forwards"]="Forwards",NavigationDirection["backwards"]="Backwards"}(NavigationDirection||(NavigationDirection={}))},c604:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NetworkConnectivityLevel})),__webpack_require__.d(__webpack_exports__,"b",(function(){return XboxInterface_XboxInterface}));var ShellDefaultApplicationParameterGroups,esm=__webpack_require__("0f0f");(function(ShellDefaultApplicationParameterGroups){ShellDefaultApplicationParameterGroups["ClientUplay"]="us-sdkClientUplay"})(ShellDefaultApplicationParameterGroups||(ShellDefaultApplicationParameterGroups={}));var NetworkConnectivityLevel,WebTokenRequestStatus,LogCategory=__webpack_require__("3f4f"),HandledError=__webpack_require__("e2c5"),AbstractPlatformInterface=__webpack_require__("557e");(function(NetworkConnectivityLevel){NetworkConnectivityLevel[NetworkConnectivityLevel["none"]=0]="none",NetworkConnectivityLevel[NetworkConnectivityLevel["localAccess"]=1]="localAccess",NetworkConnectivityLevel[NetworkConnectivityLevel["constrainedInternetAccess"]=2]="constrainedInternetAccess",NetworkConnectivityLevel[NetworkConnectivityLevel["internetAccess"]=3]="internetAccess"})(NetworkConnectivityLevel||(NetworkConnectivityLevel={})),function(WebTokenRequestStatus){WebTokenRequestStatus[WebTokenRequestStatus["success"]=0]="success",WebTokenRequestStatus[WebTokenRequestStatus["userCancel"]=1]="userCancel",WebTokenRequestStatus[WebTokenRequestStatus["accountSwitch"]=2]="accountSwitch",WebTokenRequestStatus[WebTokenRequestStatus["userInteractionRequired"]=3]="userInteractionRequired",WebTokenRequestStatus[WebTokenRequestStatus["accountProviderNotAvailable"]=4]="accountProviderNotAvailable",WebTokenRequestStatus[WebTokenRequestStatus["providerError"]=5]="providerError"}(WebTokenRequestStatus||(WebTokenRequestStatus={}));class XboxInterface_XboxInterface extends AbstractPlatformInterface["a"]{constructor(logger,_hostApplictionId,_parameterService,_isUWP){super(logger),this._hostApplictionId=_hostApplictionId,this._parameterService=_parameterService,this._isUWP=_isUWP,this._apiEnvironmentToPrefixMap={[esm["Environment"].Prod]:"",[esm["Environment"].Cert]:"cert2-",[esm["Environment"].Uat]:"uat-",[esm["Environment"].Dev]:"uat-",[esm["Environment"].Local]:"uat-"},this.ensureGamePadNavigation()}requiresDeactivation(){var _a,_b,_c;return void 0===(null===(_c=null===(_b=null===(_a=window.Windows)||void 0===_a?void 0:_a.UI)||void 0===_b?void 0:_b.WebUI)||void 0===_c?void 0:_c.WebUIApplication)||!this._isUWP}ensureGamePadNavigation(){setInterval(()=>{navigator.getGamepads()},XboxInterface_XboxInterface.timeToForceActivateGamepad)}async closeOverlay(){if(!this._isUWP)return this.redirect();try{await window.Windows.Xbox.System.Launcher.navigateBackAsync()}catch(e){try{await window.Windows.UI.ViewManagement.ApplicationView.getForCurrentView().tryConsolidateAsync()}catch(e){window.MSApp.terminateApp(new Error(e))}}}async redirect(){let url=await this.getCompletionUrl(this._hostApplictionId);url||(url="./upnexit.html"),window.location.href=url}async getCompletionUrl(applicationId){var _a;try{const response=await this._parameterService.v1.getApplicationParameters(null,null,applicationId,[ShellDefaultApplicationParameterGroups.ClientUplay]),data=response.parameters[ShellDefaultApplicationParameterGroups.ClientUplay].fields;return null!==(_a=data["scarlettUplayWebCompletionUrl"])&&void 0!==_a?_a:""}catch(e){return this._logger.error("error fetching completion url configuration",{error:e}),""}}async getFirstPartyToken(nonRoamableId,environment){const user=window.Windows.System.User.getFromId(nonRoamableId);this._logger.debug("user",{user});const prefixedEnv=this._apiEnvironmentToPrefixMap[environment],provider=await window.Windows.Security.Authentication.Web.Core.WebAuthenticationCoreManager.findAccountProviderAsync("https://xsts.auth.xboxlive.com","",user),request=new window.Windows.Security.Authentication.Web.Core.WebTokenRequest(provider);request.properties.insert("Url","https://".concat(prefixedEnv,"public-ubiservices.ubi.com/v2/profiles/sessions")),request.properties.insert("Target","xboxlive.signin"),request.properties.insert("Policy","DELEGATION");let tokenResult=await window.Windows.Security.Authentication.Web.Core.WebAuthenticationCoreManager.getTokenSilentlyAsync(request);if(this._logger.debug("tokenResult",{tokenResultStatus:tokenResult.responseStatus}),tokenResult.responseStatus===WebTokenRequestStatus.userInteractionRequired&&(tokenResult=await window.Windows.Security.Authentication.Web.Core.WebAuthenticationCoreManager.requestTokenAsync(request)),this._logger.debug("tokenResult",{tokenResultStatus:tokenResult.responseStatus}),tokenResult.responseStatus===WebTokenRequestStatus.userCancel)throw window.MSApp.terminateApp(new Error("The user cancelled the request while generating a token.")),new Error("The user cancelled the request while generating a token.");if(tokenResult.responseStatus!==WebTokenRequestStatus.success)throw this._logger.error("error creating token",{logCategory:LogCategory["a"].uncategorized}),new HandledError["a"]("An error occurred while generating a token at stage 2.");return tokenResult.responseData[0].token||""}}XboxInterface_XboxInterface.timeToForceActivateGamepad=300},c61f:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DesktopAppInterface}));var _store_runtime_context_RuntimeContext_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b193"),_AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("557e");class DesktopAppInterface extends _AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__["a"]{constructor(logger,_store){super(logger),this._store=_store}async closeOverlay(){var _a;const runtimeContextState=this._store.getReadonlyState(_store_runtime_context_RuntimeContext_state__WEBPACK_IMPORTED_MODULE_0__["a"]);null===(_a=window.native)||void 0===_a||_a.close(runtimeContextState.childId)}}},cd49:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var esm=__webpack_require__("4f5e"),dist_esm=__webpack_require__("ca76"),logging_system_dist_esm=__webpack_require__("0829"),Application=(__webpack_require__("0f0f"),__webpack_require__("621b"));__webpack_require__("eba1");class ShellConfig{constructor(data,platformType){this.applicationName="app-shell",this.shellCrossPlaySpaceId=data.shellCrossPlaySpaceId,this.shellApplicationId=data.shellPlatformSpecificAppIds[platformType],this.apiBaseUrl=data.apiBaseUrl,this.avatarBaseUrl=data.avatarBaseUrl,this.loggerConfig=data.logger,this.statisticsConfig=data.statistics}}var RuntimeParametersService=__webpack_require__("e56f"),UbiServicesFactory=__webpack_require__("ef38"),VersionRedirectionService=__webpack_require__("d4e3"),LogCategory=__webpack_require__("3f4f"),polyfills=__webpack_require__("84df"),ParentRemoteLogTransport=__webpack_require__("757c");async function main(){const logger=createLogger(),httpClient=new esm["b"],localStorageService=new dist_esm["LocalStorageService"],versionRedirectionService=new VersionRedirectionService["a"](localStorageService),runtimeParametersService=new RuntimeParametersService["a"](localStorageService),isRedirected=versionRedirectionService.redirectIfRequired(location);if(isRedirected)return;loadRuntimeParameters(runtimeParametersService,logger);const runtimeParameters=runtimeParametersService.getRuntimeParameters();if(window.history){const maskedUrl=runtimeParameters.maskedUrl;window.history.replaceState({path:maskedUrl},"",maskedUrl)}const shellConfig=new ShellConfig({local:{shellCrossPlaySpaceId:"ec66c7e2-7b44-471c-a3ab-9d1da48153c3",shellPlatformSpecificAppIds:{ps4:"fb28ccda-ffe7-478f-8676-b048090e6082",ps5:"3d8f1c42-b6dd-4492-affc-0ab5ff3130ac",pc:"83564d31-7cd7-4bc0-a763-6524e78d1a7f",stadia:"99f58b32-1fe6-4efc-942f-143ce779fac2",web:"99f58b32-1fe6-4efc-942f-143ce779fac2",mobile:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",android:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",ios:"6228f992-e472-4623-a168-486f07f27bb6",scarlett:"21edfd16-0e32-49ab-b6db-3d10566996f0","scarlett-uwp":"21edfd16-0e32-49ab-b6db-3d10566996f0",xone:"83aa7f68-481e-4ff9-bba3-54acd35786d0",luna:"1f3b8ce8-f38f-4f39-89ca-a39885bf60cb"},apiBaseUrl:"https://uat-public-ubiservices.ubi.com",avatarBaseUrl:"https://uat-ubisoft-avatars.akamaized.net",logger:{logSource:"Uplay Next Shell",batchSize:1e3,timeInterval:{max:15e3,min:1e3}},statistics:{maxEventSize:2048,maxRequestSize:8192,queueLimitCount:100,outputInterval:3e3,retry:{count:3,interval:1e4,recoverOnNewEvent:!0}}},dev:{shellCrossPlaySpaceId:"ec66c7e2-7b44-471c-a3ab-9d1da48153c3",shellPlatformSpecificAppIds:{ps4:"fb28ccda-ffe7-478f-8676-b048090e6082",ps5:"3d8f1c42-b6dd-4492-affc-0ab5ff3130ac",pc:"83564d31-7cd7-4bc0-a763-6524e78d1a7f",stadia:"99f58b32-1fe6-4efc-942f-143ce779fac2",web:"99f58b32-1fe6-4efc-942f-143ce779fac2",mobile:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",android:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",ios:"6228f992-e472-4623-a168-486f07f27bb6",scarlett:"21edfd16-0e32-49ab-b6db-3d10566996f0","scarlett-uwp":"21edfd16-0e32-49ab-b6db-3d10566996f0",xone:"83aa7f68-481e-4ff9-bba3-54acd35786d0",luna:"1f3b8ce8-f38f-4f39-89ca-a39885bf60cb"},apiBaseUrl:"https://uat-public-ubiservices.ubi.com",avatarBaseUrl:"https://uat-ubisoft-avatars.akamaized.net",logger:{logSource:"Uplay Next Shell",batchSize:100,timeInterval:{max:3e5,min:6e4}},statistics:{maxEventSize:2048,maxRequestSize:8192,queueLimitCount:100,outputInterval:{min:3e3,max:3e4},retry:{count:3,interval:1e4,recoverOnNewEvent:!0}}},uat:{shellCrossPlaySpaceId:"ec66c7e2-7b44-471c-a3ab-9d1da48153c3",shellPlatformSpecificAppIds:{ps4:"fb28ccda-ffe7-478f-8676-b048090e6082",ps5:"3d8f1c42-b6dd-4492-affc-0ab5ff3130ac",pc:"83564d31-7cd7-4bc0-a763-6524e78d1a7f",stadia:"99f58b32-1fe6-4efc-942f-143ce779fac2",web:"99f58b32-1fe6-4efc-942f-143ce779fac2",mobile:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",android:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",ios:"6228f992-e472-4623-a168-486f07f27bb6",scarlett:"21edfd16-0e32-49ab-b6db-3d10566996f0","scarlett-uwp":"21edfd16-0e32-49ab-b6db-3d10566996f0",xone:"83aa7f68-481e-4ff9-bba3-54acd35786d0",luna:"1f3b8ce8-f38f-4f39-89ca-a39885bf60cb"},apiBaseUrl:"https://uat-public-ubiservices.ubi.com",avatarBaseUrl:"https://uat-ubisoft-avatars.akamaized.net",logger:{logSource:"Uplay Next Shell",batchSize:100,timeInterval:{max:3e5,min:6e4}},statistics:{maxEventSize:2048,maxRequestSize:8192,queueLimitCount:100,outputInterval:{min:3e3,max:3e4},retry:{count:3,interval:1e4,recoverOnNewEvent:!0}}},cert:{shellCrossPlaySpaceId:"ec66c7e2-7b44-471c-a3ab-9d1da48153c3",shellPlatformSpecificAppIds:{ps4:"fb28ccda-ffe7-478f-8676-b048090e6082",ps5:"3d8f1c42-b6dd-4492-affc-0ab5ff3130ac",pc:"83564d31-7cd7-4bc0-a763-6524e78d1a7f",stadia:"99f58b32-1fe6-4efc-942f-143ce779fac2",web:"99f58b32-1fe6-4efc-942f-143ce779fac2",mobile:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",scarlett:"21edfd16-0e32-49ab-b6db-3d10566996f0","scarlett-uwp":"21edfd16-0e32-49ab-b6db-3d10566996f0",xone:"83aa7f68-481e-4ff9-bba3-54acd35786d0"},apiBaseUrl:"https://cert2-public-ubiservices.ubi.com",avatarBaseUrl:"https://uat-ubisoft-avatars.akamaized.net",logger:{logSource:"Uplay Next Shell",batchSize:100,timeInterval:{max:3e5,min:6e4}},statistics:{maxEventSize:2048,maxRequestSize:8192,queueLimitCount:100,outputInterval:{min:3e3,max:3e4},retry:{count:3,interval:1e4,recoverOnNewEvent:!0}}},prod:{shellCrossPlaySpaceId:"ec66c7e2-7b44-471c-a3ab-9d1da48153c3",shellPlatformSpecificAppIds:{ps4:"fb28ccda-ffe7-478f-8676-b048090e6082",ps5:"3d8f1c42-b6dd-4492-affc-0ab5ff3130ac",pc:"83564d31-7cd7-4bc0-a763-6524e78d1a7f",stadia:"99f58b32-1fe6-4efc-942f-143ce779fac2",web:"99f58b32-1fe6-4efc-942f-143ce779fac2",mobile:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",android:"b6fd1777-1768-4c35-89bc-5c0ef8e780bf",ios:"6228f992-e472-4623-a168-486f07f27bb6",scarlett:"21edfd16-0e32-49ab-b6db-3d10566996f0","scarlett-uwp":"21edfd16-0e32-49ab-b6db-3d10566996f0",xone:"83aa7f68-481e-4ff9-bba3-54acd35786d0",luna:"1f3b8ce8-f38f-4f39-89ca-a39885bf60cb"},apiBaseUrl:"https://public-ubiservices.ubi.com",avatarBaseUrl:"https://ubisoft-avatars.akamaized.net",logger:{logSource:"Uplay Next Shell",batchSize:100,timeInterval:{max:3e5,min:6e4}},statistics:{maxEventSize:2048,maxRequestSize:8192,queueLimitCount:100,outputInterval:{min:3e3,max:3e4},retry:{count:3,interval:1e4,recoverOnNewEvent:!0}}}}[runtimeParameters.environment],runtimeParameters.platformType),serviceConfig={applicationId:shellConfig.shellApplicationId,endpoint:shellConfig.apiBaseUrl},ubiServicesFactory=new UbiServicesFactory["a"](serviceConfig,httpClient),ubiServices=ubiServicesFactory.getUbiServices(),application=new Application["a"](logger,runtimeParametersService,shellConfig,httpClient,ubiServicesFactory,ubiServices,versionRedirectionService,localStorageService);try{await application.start()}catch(e){console.error(e),"showError"in window&&showError(e)}}function loadRuntimeParameters(runtimeParametersService,logger){const loadedParametersFromLocalStorage=runtimeParametersService.loadFromLocalStorage(),parametersErrors=runtimeParametersService.parseQueryParameters(window.location.href,loadedParametersFromLocalStorage),runtimeParams=runtimeParametersService.getRuntimeParameters();setRemoteLogsRules(logger,runtimeParams.childId),parametersErrors.length>0&&(parametersErrors.forEach(error=>logger.error("Configuration error",{error})),runtimeParametersService.overrideParameter("configurationCorrupted",!0))}function createLogger(){const rules=[{level:logging_system_dist_esm["b"].Warning,transport:logging_system_dist_esm["g"].persistentQueue},{level:logging_system_dist_esm["b"].Error,transport:logging_system_dist_esm["g"].persistentQueue}],config={applicationQueueId:"Shell-App",rules,settings:{logCategory:LogCategory["a"].shell},useDebugMode:!1};return new logging_system_dist_esm["d"]("Shell",config)}function setRemoteLogsRules(logger,childId){let remoteLogTransport;childId?(remoteLogTransport="ParentRemoteLogTransport",logger.addCustomTransport(ParentRemoteLogTransport["a"],new ParentRemoteLogTransport["a"],remoteLogTransport),logger.settings.context={childId}):remoteLogTransport=logging_system_dist_esm["g"].remoteLogger,logger.addRule({level:"All",transport:remoteLogTransport})}Object(polyfills["b"])(),main()},ce93:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MicroAppLifeGuardFactory_MicroAppLifeGuardFactory}));var esm=__webpack_require__("c94a"),dist_esm=__webpack_require__("f350"),LogCategory=__webpack_require__("3f4f"),Application_intents=__webpack_require__("61d7"),Application_state=__webpack_require__("6975"),RuntimeContext_state=__webpack_require__("b193"),AsyncDelay=__webpack_require__("3bde"),HandledError=__webpack_require__("e2c5");class MicroAppLoader{constructor(_bundleUrl){this._loadCounter=0,this._url=new URL(_bundleUrl)}async load(){this._url.searchParams.set("cacheBust","".concat(this._loadCounter));let microAppConstructor=void 0,loadError=void 0;try{microAppConstructor=await this.loadUmdMicroApp()}catch(error){loadError=error}if(microAppConstructor)return microAppConstructor;if(!microAppConstructor&&loadError)throw this._loadCounter++,loadError;if(microAppConstructor)return microAppConstructor;throw new Error("Failed to load app from ".concat(this._url.protocol,"//").concat(this._url.hostname).concat(this._url.pathname,". Both UMD and ESM import methods failed."))}async loadUmdMicroApp(){try{const appModule=await window.System.import(this._url.toString());if(appModule.default)return appModule.default.default||appModule.default;throw new Error("Failed to load app from ".concat(this._url.protocol,"//").concat(this._url.hostname).concat(this._url.pathname,". The module has no default export"))}catch(error){throw window.System.delete(window.System.resolve(this._url.toString())),error}}async loadEsmMicroApp(){const appModule=await window.__esm_loader__(this._url.toString());return appModule.default}}class MicroAppLifeGuard_MicroAppLifeGuard{constructor(_appConfig,_store,_logger,_apiFactory,_microAppLoadTimeoutInMs,_microAppLifeCycleTimeoutInMs,_changeFocusTimeoutInMs,_scrollContentTimeoutInMs,_featureHandlerService,_hostCommunicationService,_bundleLoader=new MicroAppLoader(_appConfig.bundleUrl)){this._appConfig=_appConfig,this._store=_store,this._logger=_logger,this._apiFactory=_apiFactory,this._microAppLoadTimeoutInMs=_microAppLoadTimeoutInMs,this._microAppLifeCycleTimeoutInMs=_microAppLifeCycleTimeoutInMs,this._changeFocusTimeoutInMs=_changeFocusTimeoutInMs,this._scrollContentTimeoutInMs=_scrollContentTimeoutInMs,this._featureHandlerService=_featureHandlerService,this._hostCommunicationService=_hostCommunicationService,this._bundleLoader=_bundleLoader,this._api=void 0,this._focusable=!1,this._mounted=!1,this._mounting=!1,this._store.watchState(Application_state["a"],"getMicroAppContainer",getMicroAppContainer=>{const container=getMicroAppContainer(this._appConfig.placement);container&&this.updateContainerElement(container)})}updateContainerElement(newContainer){this._appContainerElement&&(this._appContainer&&this._appContainer.removeChild(this._appContainerElement),newContainer.appendChild(this._appContainerElement)),this._appContainer=newContainer}getDescription(){const data=[];return data.push("".concat(this._appConfig.appName,":").concat(this.getAppVersion())),data.push(this._mounted?"mounted":"unmounted"),data.push(this._appConstructor?"loaded":"unloaded"),data.join(": ")}getAppVersion(){var _a,_b;if(null===(_a=this._appInstance)||void 0===_a?void 0:_a.appVersion)return null===(_b=this._appInstance)||void 0===_b?void 0:_b.appVersion;try{const urlParts=new URL(this._appConfig.bundleUrl).pathname.split("/");return urlParts.length>=2?urlParts[1]:this._appConfig.bundleUrl}catch(e){return this._appConfig.bundleUrl}}getAppApplicationId(){var _a;return null===(_a=this._appInstance)||void 0===_a?void 0:_a.applicationId}get mounted(){return this._mounted}async mountMicroApp(visible=!0){let app;this.logDebug("mount"),visible&&this._store.dispatchIntent(new Application_intents["h"](!0,this._appConfig.placement));try{app=await this.ensureAppLoaded()}catch(e){return this.logError("mount. ensureAppLoaded failed",e),Promise.reject(e)}if(!this._appContainerElement)try{const placementContainerElement=this.getContainerDiv(this._appConfig.placement);this._appContainerElement=document.createElement("div"),this._appContainerElement.id=this._appConfig.appName,this._appContainerElement.hidden=!0,placementContainerElement.appendChild(this._appContainerElement)}catch(e){return this.logError("mount. creating app container failed",e),this.unmount(),Promise.reject(e)}while(this._mounting)await Object(AsyncDelay["a"])(100);if(!this._mounted)try{if(this._mounting=!0,this._mounted=await Object(AsyncDelay["b"])(this._microAppLifeCycleTimeoutInMs,app.mount(this._appContainerElement,"")),!this._mounted)return this.logError("mount. app mount unsuccessful"),this.unmount(),Promise.reject("App wasn't mounted")}catch(e){return this.logError("mount. app mount failed",e),this.unmount(),Promise.reject(e)}finally{this._mounting=!1}return this._mounted}async activateMicroApp(activationContext){if(this.logDebug("Activating micro app",activationContext.applicationData),!this._mounted||!this._appInstance)return this.logError("activate. mount first"),!1;if(!this._appContainerElement)return this._logger.error("activate. app container unexists after mount. teardown app",{appConfig:this._appConfig,logCategory:LogCategory["a"].lifeGuard}),this.unmount(),!1;try{const result=await Object(AsyncDelay["b"])(this._microAppLifeCycleTimeoutInMs,this._appInstance.beforeActivate(activationContext));if(!result)return this.logWarning("activate. beforeActivate failed"),!1;const runtimeContextState=this._store.getReadonlyState(RuntimeContext_state["a"]);await this.showShellContainerOnNativeHost(activationContext,runtimeContextState.activeGame)}catch(e){return this.logError("activate. beforeActivate failed with error",e),!1}return this._focusable=!0,this.makeVisibleAndHideAllOtherMicroApps(),!0}async showShellContainerOnNativeHost(activationContext,game){var _a;if(!this._hostCommunicationService)return;const result=await Object(AsyncDelay["b"])(MicroAppLifeGuard_MicroAppLifeGuard.nativeHostRequestTimeoutInMs,this._featureHandlerService.handleFeature(dist_esm["h"].ShowShellContainer,{appName:this._appConfig.appName,applicationData:activationContext.applicationData,game}));return result&&!(null===(_a=result.response)||void 0===_a?void 0:_a.isSuccessful)?Promise.reject("Shell container could not be shown on native host"):void 0}async requestDeactivation(){if(this.logDebug("requestDeactivation"),!this._appContainerElement||!this._appInstance)throw new Error("Can not deactivate an inactive micro app");return await Object(AsyncDelay["b"])(this._microAppLifeCycleTimeoutInMs,this._appInstance.beforeDeactivate())}deactivate(){this.logDebug("deactivate."),this._appContainerElement&&(this._appContainerElement.hidden=!0),this._focusable=!1}async unmountMicroApp(){if(this.logDebug("unmount"),this._appInstance){try{await Object(AsyncDelay["b"])(this._microAppLifeCycleTimeoutInMs,this._appInstance.beforeUnmount())}catch(e){this.logError("unmount. beforeUnmount fails",e)}this.unmount(),this._api&&(this._api.dispose(),this._api=void 0),this._appInstance=void 0,this._mounted=!1}}async focusApp(){const app=this._appInstance;let result;if(!app){const rejectReason="Trying to focus app ".concat(this._appConfig.appName,", but app is not yet loaded");return this.logWarning(rejectReason),!1}if(!this._focusable)return!1;try{app.focus&&(await Object(AsyncDelay["a"])(0),result=await Object(AsyncDelay["b"])(this._changeFocusTimeoutInMs,app.focus()))}catch(e){return this.logError("Failed to focus application",e),!1}return"boolean"!==typeof result||result}async blurApp(){var _a;const app=this._appInstance;if(app)try{return app.blur&&await Object(AsyncDelay["b"])(this._changeFocusTimeoutInMs,app.blur()),null!=document.activeElement&&(null===(_a=document.activeElement)||void 0===_a||_a.blur()),!0}catch(e){return this.logError("Failed to blur application",e),!1}return!0}unmount(){var _a;null===(_a=this._appContainerElement)||void 0===_a||_a.remove(),this._appContainerElement=void 0}async tryLoadApp(){try{const app=await this.ensureAppLoaded();return void 0!==app}catch(e){return!1}}async ensureAppLoaded(){if(this._appInstance)return this._appInstance;let appConstructor=this._appConstructor;if(!appConstructor)try{this.logDebug("ensureAppLoaded. start loading app module"),appConstructor=await Object(AsyncDelay["b"])(this._microAppLoadTimeoutInMs,this._bundleLoader.load())}catch(e){return this.logError("ensureAppLoaded. error loading app module",e),Promise.reject(e)}const pcClientWrapper=this._hostCommunicationService&&this._hostCommunicationService instanceof esm["c"]?new esm["d"](this._hostCommunicationService):void 0;this._api=this._apiFactory.createAppropriateApi(this._store,this._appConfig,this._logger,pcClientWrapper);const appInstance=new appConstructor(this._api,this._appConfig);if(appInstance.appName!==this._appConfig.appName){const errorMessage="Expected microapp: ".concat(this._appConfig.appName," but received: ").concat(appInstance.appName);return this.logError("ensureAppLoaded. incorrect microapp configuration.",errorMessage),Promise.reject(errorMessage)}return this._appInstance=appInstance,this._appConstructor||(this._appConstructor=appConstructor),this._api.applicationId=appInstance.applicationId,this._api.applicationBuildId=this.getAppVersion(),this._appInstance}async scrollAppContent(options){const app=this._appInstance;if(app)try{if(this._focusable&&app.scrollContent)return await Object(AsyncDelay["b"])(this._scrollContentTimeoutInMs,app.scrollContent(options)),!0}catch(e){this.logError("Failed to scroll application content",e)}return!1}getContainerDiv(placement){let div=this._appContainer;if(!div){const appState=this._store.getReadonlyState(Application_state["a"]);div=appState.getMicroAppContainer(placement)}if(!div){const error=new HandledError["a"]("container div for placement ".concat(this._appConfig.placement," is not set"));throw this.logError("getContainerDiv shell error",error),error}return div}logError(message,error,moreData){this._logger.error(message,{moreInfo:Object.assign({appConfig:this._appConfig,version:this.getAppVersion()},moreData),error,logCategory:LogCategory["a"].lifeGuard})}logDebug(message,additionalData){this._logger.debug(message,{appConfig:this._appConfig,version:this.getAppVersion(),data:additionalData,logCategory:LogCategory["a"].lifeGuard})}logWarning(message){this._logger.warn(message,{appConfig:this._appConfig,version:this.getAppVersion(),logCategory:LogCategory["a"].lifeGuard})}makeVisibleAndHideAllOtherMicroApps(){var _a;if(this._appContainerElement){const parent=this.getContainerDiv(this._appConfig.placement);null===(_a=parent.childNodes)||void 0===_a||_a.forEach(node=>{if("hidden"in node){let elem=node;elem.hidden=!0}}),this._store.dispatchIntent(new Application_intents["h"](!1,this._appConfig.placement)),this._appContainerElement.hidden=!1}}}MicroAppLifeGuard_MicroAppLifeGuard.nativeHostRequestTimeoutInMs=2e3;var NavigationHistory_state=__webpack_require__("6fc2");class NativeMicroAppLifeGuard_NativeMicroAppLifeGuard{constructor(_appConfig,_store,_logger,_featureHandlerService){this._appConfig=_appConfig,this._store=_store,this._logger=_logger,this._featureHandlerService=_featureHandlerService,this._mounted=!1,this._activated=!1}getDescription(){return"".concat(this._appConfig.appName,":").concat(this._mounted?"mounted":"unmounted")}getAppVersion(){return"unknown"}getAppApplicationId(){}get mounted(){return this._mounted}async mountMicroApp(visible=!0){return this.logDebug("Mount native micro app"),visible&&this._store.dispatchIntent(new Application_intents["h"](!0,this._appConfig.placement)),this._mounted||(this._mounted=!0),this._mounted}async activateMicroApp(activationContext){var _a;if(this.logDebug("Activating native micro app",activationContext.applicationData),!this._mounted)return this.logError("Native micro app must be mounted first before it is shown"),!1;if(!this._activated){try{const result=await Object(AsyncDelay["b"])(NativeMicroAppLifeGuard_NativeMicroAppLifeGuard.requestTimeoutInMs,this._featureHandlerService.handleFeature(dist_esm["h"].ShowNativePart,{appName:this._appConfig.appName,game:activationContext.game,applicationData:activationContext.applicationData}));if(null!==result&&!(null===(_a=null===result||void 0===result?void 0:result.response)||void 0===_a?void 0:_a.isSuccessful))return this.logError("Native micro app could not be shown"),!1}catch(e){return this.logError("Showing of native micro app failed with error",e),!1}this._store.dispatchIntent(new Application_intents["h"](!1,this._appConfig.placement)),this._activated=!0}return this._activated}async requestDeactivation(){if(this.logDebug("Hide native micro app"),!this._activated){const errorMessage="Native micro app must be shown before it is hidden";return this.logError(errorMessage),Promise.reject(errorMessage)}const navigationHistoryState=this._store.getReadonlyState(NavigationHistory_state["a"]),currentItem=navigationHistoryState.currentItem(this._appConfig.placement);return{confirmationRequired:!1,applicationData:null===currentItem||void 0===currentItem?void 0:currentItem.applicationData}}deactivate(){this.logDebug("Deactivate native micro app"),this._activated=!1}async unmountMicroApp(){this.logDebug("Unmount native micro app"),this._mounted=!1}async focusApp(){return!0}async blurApp(){return!0}async tryLoadApp(){return!0}async scrollAppContent(options){return!0}logError(message,error,moreData){this._logger.error(message,{moreInfo:Object.assign({appConfig:this._appConfig},moreData),error,logCategory:LogCategory["a"].lifeGuard})}logDebug(message,additionalData){this._logger.debug(message,{appConfig:this._appConfig,data:additionalData,logCategory:LogCategory["a"].lifeGuard})}}NativeMicroAppLifeGuard_NativeMicroAppLifeGuard.requestTimeoutInMs=2e3;class MicroAppLifeGuardFactory_MicroAppLifeGuardFactory{constructor(_store,_logger,_apiFactory,_featureHandlerService,_hostCommunicationService,_microAppLoadTimeoutInMs=2e4,_microAppLifeCycleTimeoutInMs=2e4,_changeFocusTimeoutInMs=1e3,_scrollContentTimeoutInMs=1e3){this._store=_store,this._logger=_logger,this._apiFactory=_apiFactory,this._featureHandlerService=_featureHandlerService,this._hostCommunicationService=_hostCommunicationService,this._microAppLoadTimeoutInMs=_microAppLoadTimeoutInMs,this._microAppLifeCycleTimeoutInMs=_microAppLifeCycleTimeoutInMs,this._changeFocusTimeoutInMs=_changeFocusTimeoutInMs,this._scrollContentTimeoutInMs=_scrollContentTimeoutInMs}create(appConfig){return appConfig.isNative?new NativeMicroAppLifeGuard_NativeMicroAppLifeGuard(appConfig,this._store,this._logger,this._featureHandlerService):new MicroAppLifeGuard_MicroAppLifeGuard(appConfig,this._store,this._logger,this._apiFactory,this._microAppLoadTimeoutInMs,this._microAppLifeCycleTimeoutInMs,this._changeFocusTimeoutInMs,this._scrollContentTimeoutInMs,this._featureHandlerService,this._hostCommunicationService,new MicroAppLoader(appConfig.bundleUrl))}}},dbfd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DefaultPcClientInterface}));var _upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("f350"),_AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("557e");class DefaultPcClientInterface extends _AbstractPlatformInterface__WEBPACK_IMPORTED_MODULE_1__["a"]{constructor(logger,_featureHandlerService){super(logger),this._featureHandlerService=_featureHandlerService}async closeOverlay(){this._featureHandlerService.handleFeatureWithoutPayload(_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["h"].OverlayIsHidden)}}},e51b:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PcNotification}));var PcNotification,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("f350");(function(PcNotification){PcNotification.SupportedNotificationTypes=[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GameInvite,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].FriendInGame,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].FriendOnline,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].PlayAvailable,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GamePatchAvailable,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].DownloadCompleted,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].OverlayStart,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GameCustom,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].FriendRequest,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].ScreenshotSaved,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].ChatMessage,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GroupInvite,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].SharePlayInviteFailed,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].SharePlayTimeOutSessionReminder,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].SharePlaySessionEnded],PcNotification.AlwaysShownNotifications=[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].OverlayStart,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GameCustom,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].SharePlayInviteFailed,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].SharePlayTimeOutSessionReminder,_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].SharePlaySessionEnded],PcNotification.NotificationsSettingsEnabledMap={[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GameInvite]:"gameInviteEnabled",[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].FriendInGame]:"friendGameEnabled",[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].FriendOnline]:"friendOnlineEnabled",[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].PlayAvailable]:"playAvailableEnabled",[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["ub"].GamePatchAvailable]:"gamePatchAvailableEnabled",[_upn_shell_messages__WEBPACK_IMPORTED_MODULE_0__["